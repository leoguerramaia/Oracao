<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Login - Pedidos de Ora√ß√£o</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:Arial,sans-serif;background:#f4f6f8;margin:0}
    header{background:#2c3e50;color:#fff;padding:20px;text-align:center;box-shadow:0 2px 10px rgba(0,0,0,.15)}
    .container{max-width:400px;margin:40px auto;background:#fff;padding:24px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,.1)}
    h2{margin-top:0}
    label{display:block;margin:12px 0 6px;font-weight:bold}
    input{width:100%;padding:12px;border:1px solid #ccc;border-radius:8px}
    button{margin-top:16px;width:100%;padding:14px;background:#27ae60;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:bold;cursor:pointer}
    button:hover{background:#219150}
    .btn-home{margin-top:12px;background:#fff;color:#2c3e50;border:1px solid #ccc}
    .btn-home:hover{background:#f7f9fb}
  </style>
</head>
<body>
  <header>
    <h1>üîë Login</h1>
  </header>

  <div class="container">
    <h2>Entre na sua conta</h2>
    <form id="loginForm">
      <label for="email">E-mail ou Usu√°rio:</label>
      <input type="text" id="email" required />
      <label for="senha">Senha:</label>
      <input type="password" id="senha" required />
      <button type="submit">Entrar</button>
      <button type="button" class="btn-home" onclick="location.href='index.html'">üè† P√°gina Inicial</button>
    </form>
  </div>

  <script>
    document.getElementById("loginForm").addEventListener("submit", function(e){
      e.preventDefault();

      const emailInput = document.getElementById("email").value.trim().toLowerCase();
      const senha = document.getElementById("senha").value;
      const cadastros = JSON.parse(localStorage.getItem("cadastrosUsuarios")) || [];

      // Admin fixo
      if(emailInput === "admin"){
        if(senha !== "pedidodeoracao"){
          alert("‚ùå Senha incorreta para admin.");
          return;
        }
        const adminUser = { nome:"Administrador", email:"admin", sexo:"MASCULINO" };
        localStorage.setItem("usuarioLogado", JSON.stringify(adminUser));
        window.location.href = "admin.html";
        return;
      }

      // Busca usu√°rio cadastrado
      const user = cadastros.find(u => (u.email || "").toLowerCase() === emailInput);
      if(!user){ alert("‚ùå Usu√°rio n√£o encontrado."); return; }
      if(user.senha !== senha){ alert("‚ùå Senha incorreta."); return; }

      // Salva sempre o usu√°rio logado
      localStorage.setItem("usuarioLogado", JSON.stringify(user));

      // Regras especiais ‚Üí admin.html
      const emailLower = (user.email || "").toLowerCase();
      if(emailLower === "leoguerramaia@gmail.com" || emailLower === "admin@admin.com.br"){
        window.location.href = "admin.html";
        return;
      }

      // Usu√°rio comum ‚Üí usuariologado.html
      window.location.href = "usuariologado.html";
    });
  </script>
</body>
</html>
